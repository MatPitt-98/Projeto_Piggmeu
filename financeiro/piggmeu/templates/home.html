<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Piggmeu</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'style_piggmeu.css' %}">
</head>

<body>
    <div class="container">
        <h1>Piggmeu</h1>
        <h2>Controle de Receitas e Despesas</h2>

        <form method="POST">
            {% csrf_token %}
            <input type="text" name="descricao" placeholder="Descrição" required>
            <input type="number" step="0.01" name="valor" placeholder="Valor" required>
            <select name="tipo" required>
                <option value="R">Receita</option>
                <option value="D">Despesa</option>
            </select>
            <button type="submit">Adicionar</button>
        </form>
        
        <h2>Transações</h2>
        <table>
            <tr>
                <th>Descrição</th>
                <th>Valor</th>
                <th>Tipo</th>
                <th>Ações</th>
            </tr>
            {% for t in transacoes %}
            <tr>
                <td>{{ t.descricao }}</td>
                <td>R$ {{ t.valor }}</td>
                <td>{{ t.get_tipo_display }}</td>
                <td>
                    <form method="POST" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="delete_id" value="{{ t.id }}">
                        <button type="submit" class="btn-delete">Excluir</button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">Nenhuma transação cadastrada.</td>
            </tr>
            {% endfor %}
        </table>

        <div class="resumo">
            <p><strong>{{ quantidade_receitas }} Receitas totalizando</strong> R$ {{ total_receitas }}</p>
            <p><strong>{{ quantidade_despesas }} Despesas totalizando</strong> R$ {{ total_despesas }}</p>
        </div>
    </div>
</body>

</html>